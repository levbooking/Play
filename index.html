<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Clicker Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { background:#121212; color:white; font-family:Arial; text-align:center; }
input, button { padding:12px; margin:6px; font-size:16px; }
.card { background:#1e1e1e; padding:15px; margin:15px; border-radius:10px; }
.hidden { display:none; }
.shop-item { border-top:1px solid #333; padding-top:10px; margin-top:10px; }
</style>
</head>
<body>

<h1>üî• Clicker Game</h1>

<div id="auth" class="card">
  <h3>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
  <input id="loginInput" placeholder="–õ–æ–≥–∏–Ω"><br>
  <input id="passwordInput" type="password" placeholder="–ü–∞—Ä–æ–ª—å"><br>
  <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
  <button onclick="loginUser()">–í–æ–π—Ç–∏</button>
</div>

<div id="game" class="hidden">

  <div class="card">
    <h2 id="userLabel"></h2>
    <h3>üí∞ –ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></h3>
    <button onclick="clickCoin()">–ö–ª–∏–∫ (+<span id="clickPower">1</span>)</button>
  </div>

  <div class="card">
    <h3>üè™ –ú–∞–≥–∞–∑–∏–Ω</h3>

    <div class="shop-item">
      üî® –°–∏–ª–∞ –∫–ª–∏–∫–∞ (—É—Ä. <span id="clickLvl">1</span>)<br>
      –¶–µ–Ω–∞: <span id="clickPrice">50</span><br>
      <button onclick="buyClick()">–ö—É–ø–∏—Ç—å</button>
    </div>

    <div class="shop-item">
      ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫ (—É—Ä. <span id="autoLvl">0</span>/15)<br>
      –î–æ—Ö–æ–¥: <span id="autoPower">0</span>/—Å–µ–∫<br>
      –¶–µ–Ω–∞: <span id="autoPrice">100</span><br>
      <button onclick="buyAuto()">–ö—É–ø–∏—Ç—å</button>
    </div>
  </div>

  <div class="card">
    <h3>üéÅ –í–≤–µ—Å—Ç–∏ –∫–æ–¥</h3>
    <input id="codeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"><br>
    <button onclick="redeemCode()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>

  <button onclick="logout()">–í—ã–π—Ç–∏</button>
</div>

<script>
let currentUser = null;
let autoTimer = null;

// üéÅ –ù–ê–°–¢–†–û–ô–ö–ê –ö–û–î–û–í (–¢–´ –ò–• –û–ë–™–Ø–í–õ–Ø–ï–®–¨ –ò–ì–†–û–ö–ê–ú)
const REWARD_CODES = {
  "START-100": 100,
  "LIT-500": 500,
  "MEGA-1000": 1000
  "ADMIN-999999999" : 999999999
};

function getUsers() {
  return JSON.parse(localStorage.getItem("users") || "{}");
}
function saveUsers(u) {
  localStorage.setItem("users", JSON.stringify(u));
}
function getUsedCodes() {
  return JSON.parse(localStorage.getItem("usedCodes") || "[]");
}
function saveUsedCodes(codes) {
  localStorage.setItem("usedCodes", JSON.stringify(codes));
}

function register() {
  const login = loginInput.value.trim();
  const pass = passwordInput.value;
  if (!login || !pass) return alert("–ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è");

  let users = getUsers();
  if (users[login]) return alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç");

  users[login] = { password: pass, coins: 0, click: 1, clickLvl: 1, autoLvl: 0 };
  saveUsers(users);
  alert("–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω");
}

function loginUser() {
  const login = loginInput.value.trim();
  const pass = passwordInput.value;
  let users = getUsers();

  if (!users[login] || users[login].password !== pass)
    return alert("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");

  currentUser = login;
  localStorage.setItem("currentUser", login);
  showGame();
}

function showGame() {
  auth.classList.add("hidden");
  game.classList.remove("hidden");
  updateUI();
  startAuto();
}

function updateUI() {
  let u = getUsers()[currentUser];
  userLabel.innerText = "–ò–≥—Ä–æ–∫: " + currentUser;
  coins.innerText = u.coins;
  clickPower.innerText = u.click;
  clickLvl.innerText = u.clickLvl;
  autoLvl.innerText = u.autoLvl;
  autoPower.innerText = u.autoLvl * 2;
  clickPrice.innerText = 50 * u.clickLvl;
  autoPrice.innerText = 100 * (u.autoLvl + 1);
}

function clickCoin() {
  let u = getUsers();
  u[currentUser].coins += u[currentUser].click;
  saveUsers(u);
  updateUI();
}

function buyClick() {
  let u = getUsers();
  let p = 50 * u[currentUser].clickLvl;
  if (u[currentUser].coins < p) return alert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç");

  u[currentUser].coins -= p;
  u[currentUser].clickLvl++;
  u[currentUser].click++;
  saveUsers(u);
  updateUI();
}

function buyAuto() {
  let u = getUsers();
  if (u[currentUser].autoLvl >= 15) return alert("–ú–∞–∫—Å–∏–º—É–º");

  let p = 100 * (u[currentUser].autoLvl + 1);
  if (u[currentUser].coins < p) return alert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç");

  u[currentUser].coins -= p;
  u[currentUser].autoLvl++;
  saveUsers(u);
  updateUI();
  startAuto();
}

function startAuto() {
  if (autoTimer) clearInterval(autoTimer);
  autoTimer = setInterval(() => {
    let u = getUsers();
    u[currentUser].coins += u[currentUser].autoLvl * 2;
    saveUsers(u);
    updateUI();
  }, 1000);
}

// üéÅ –ê–ö–¢–ò–í–ê–¶–ò–Ø –ö–û–î–ê
function redeemCode() {
  const code = codeInput.value.trim().toUpperCase();
  if (!code) return;

  const used = getUsedCodes();
  if (used.includes(code)) return alert("–ö–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω");

  if (!REWARD_CODES[code]) return alert("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥");

  let u = getUsers();
  u[currentUser].coins += REWARD_CODES[code];
  saveUsers(u);

  used.push(code);
  saveUsedCodes(used);

  alert("üéâ –ü–æ–ª—É—á–µ–Ω–æ: +" + REWARD_CODES[code] + " –º–æ–Ω–µ—Ç");
  codeInput.value = "";
  updateUI();
}

function logout() {
  localStorage.removeItem("currentUser");
  location.reload();
}

window.onload = () => {
  const saved = localStorage.getItem("currentUser");
  if (saved) {
    currentUser = saved;
    showGame();
  }
};
</script>

</body>
</html>
